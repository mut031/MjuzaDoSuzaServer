{"version":3,"sources":["./src/app/tv/playlist-item/playlist-item.component.html","./src/app/tv/tv.page.html","./src/app/tv/playlist-item/playlist-item.component.scss","./src/app/tv/playlist-item/playlist-item.component.ts","./src/app/tv/tv.module.ts","./src/app/tv/tv.page.scss","./src/app/tv/tv.page.ts"],"names":[],"mappings":"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","file":"tv-tv-module-es2015.js","sourcesContent":["module.exports = \"<ion-item [attr.color]=\\\"result._id === currentId ? 'primary' : ''\\\" class=\\\"item\\\" [disabled]=\\\"result._id === currentId ? true : false\\\">\\r\\n  <ion-thumbnail (click)=\\\"playMe()\\\" class=\\\"ion-margin-end thumbnail\\\">\\r\\n    <img src=\\\"{{result.thumbnail}}\\\">\\r\\n  </ion-thumbnail>\\r\\n  <ion-label>\\r\\n    <h2 (click)=\\\"playMe()\\\" class=\\\"title\\\">{{result?.title}}</h2>\\r\\n    <p>{{result?.description}}</p>\\r\\n  </ion-label>\\r\\n  <ion-icon (click)=\\\"deleteMe()\\\" name=\\\"trash\\\" class=\\\"ion-margin-start trash\\\" color=\\\"danger\\\"></ion-icon>\\r\\n</ion-item>\"","module.exports = \"<ion-content>\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col offset=\\\"2\\\" class=\\\"align-items-center justify-content-center\\\" size=\\\"8\\\">\\r\\n\\r\\n        <ion-card>\\r\\n          <ion-card-header>\\r\\n\\r\\n            <h1>Room code: {{roomId | uppercase}}</h1>\\r\\n            <ion-item  lines=\\\"none\\\">\\r\\n                <ion-label>Show video player</ion-label>\\r\\n                <ion-toggle slot=\\\"start\\\"  [(ngModel)]=\\\"showPlayer\\\"  name=\\\"blueberry\\\" checked></ion-toggle>\\r\\n              </ion-item>\\r\\n          </ion-card-header>\\r\\n          <ion-card-content class=\\\"ion-text-center\\\" *ngIf=\\\"currentSong\\\">\\r\\n            <youtube-player width=\\\"70%\\\" [hidden]=\\\"!showPlayer\\\" [videoId]=\\\"currentSong._id\\\" (ready)=\\\"savePlayer($event)\\\"\\r\\n              (change)=\\\"onStateChange($event)\\\">\\r\\n            </youtube-player>\\r\\n            <ion-list>\\r\\n              <app-playlist-item *ngFor=\\\"let item of items\\\" [result]=\\\"item\\\" [currentId]=\\\"currentSong._id\\\"\\r\\n                (playSong)=\\\"playNextSong($event[0])\\\" (deleteSong)=\\\"removeSongFromPlaylist($event[0])\\\">\\r\\n              </app-playlist-item>\\r\\n            </ion-list>\\r\\n          </ion-card-content>\\r\\n        </ion-card>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n</ion-content>\"","module.exports = \".thumbnail {\\n  cursor: pointer;\\n}\\n\\n.title:hover {\\n  text-decoration: underline;\\n  cursor: pointer;\\n}\\n\\n.trash:hover {\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdHYvcGxheWxpc3QtaXRlbS9DOlxcSW9uaWNcXE1qdXphRG9TdXphL3NyY1xcYXBwXFx0dlxccGxheWxpc3QtaXRlbVxccGxheWxpc3QtaXRlbS5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvdHYvcGxheWxpc3QtaXRlbS9wbGF5bGlzdC1pdGVtLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZUFBQTtBQ0NKOztBRENBO0VBQ0ksMEJBQUE7RUFDQSxlQUFBO0FDRUo7O0FEQ0E7RUFDSSxlQUFBO0FDRUoiLCJmaWxlIjoic3JjL2FwcC90di9wbGF5bGlzdC1pdGVtL3BsYXlsaXN0LWl0ZW0uY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGh1bWJuYWlsIHtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG4udGl0bGU6aG92ZXIge1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn1cclxuXHJcbi50cmFzaDpob3ZlciB7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbn0iLCIudGh1bWJuYWlsIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4udGl0bGU6aG92ZXIge1xuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4udHJhc2g6aG92ZXIge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59Il19 */\"","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\r\nimport { Item } from 'src/app/user/item.model';\r\n\r\n@Component({\r\n  selector: 'app-playlist-item',\r\n  templateUrl: './playlist-item.component.html',\r\n  styleUrls: ['./playlist-item.component.scss'],\r\n})\r\nexport class PlaylistItemComponent implements OnInit {\r\n  @Input() result: Item;\r\n  @Input() currentId: string;\r\n  @Output() playSong: EventEmitter<any> = new EventEmitter();\r\n  @Output() deleteSong: EventEmitter<any> = new EventEmitter();\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() { }\r\n\r\n  deleteMe() {\r\n    if(this.currentId !== this.result._id)\r\n      this.deleteSong.emit([this.result]);\r\n  }\r\n\r\n  playMe() {\r\n    if(this.currentId !== this.result._id)\r\n      this.playSong.emit([this.result._id]);\r\n  }\r\n}","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { TvPage } from './tv.page';\r\nimport { PlaylistItemComponent } from './playlist-item/playlist-item.component';\r\nimport { NgxYoutubePlayerModule } from 'ngx-youtube-player';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: TvPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    NgxYoutubePlayerModule\r\n  ],\r\n  declarations: [TvPage, PlaylistItemComponent]\r\n})\r\nexport class TvPageModule {}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3R2L3R2LnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { Item } from '../user/item.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { HttpHeaders } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\nimport { Socket } from 'ngx-socket-io';\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { ToastController } from '@ionic/angular';\r\nimport { DataService } from '../services/data.service';\r\n\r\n@Component({\r\n  selector: 'app-tv',\r\n  templateUrl: './tv.page.html',\r\n  styleUrls: ['./tv.page.scss'],\r\n})\r\nexport class TvPage implements OnInit {\r\n  items: Item[] = [];\r\n  currentSong: Item;\r\n  roomId: string;\r\n  showPlayer: boolean = true;\r\n\r\n  private player;\r\n  private ytEvent;\r\n  private currentSongIndex;\r\n\r\n  constructor(\r\n    private ds: DataService, private http: HttpClient, private socket: Socket, private route: ActivatedRoute, private router: Router, public toastController: ToastController) { }\r\n\r\n  ngOnInit() {\r\n    this.roomId = this.route.snapshot.paramMap.get('id');\r\n    if(!this.roomId)  {\r\n      this.router.navigate(['/home'])\r\n    }\r\n    this.http.get(`${environment.SERVER_URL}/playlists`)\r\n      .subscribe((data: any) => {\r\n        if (!data.filter(item => item.title === this.roomId).length)\r\n          this.router.navigate(['/home'])\r\n      });\r\n    this.getRoomAdmin();\r\n    this.socket.connect();\r\n    this.socket.emit('createRoom', { roomId: this.roomId });\r\n    this.socket.fromEvent('update').subscribe(() => {\r\n      this.getPlaylistForRoom();\r\n    });\r\n    this.getPlaylistForRoom();\r\n  }\r\n\r\n  getRoomAdmin() {\r\n    this.http.get(`${environment.SERVER_URL}/playlists/${this.roomId}`)\r\n      .subscribe((data: any) => {\r\n        if(data && data.user.length > 0 && data.user !== localStorage.getItem('username')) {\r\n          this.router.navigate(['/home']);\r\n        }\r\n      });\r\n  }\r\n\r\n  getPlaylistForRoom() {\r\n    this.http.get(`${environment.SERVER_URL}/songs/${this.roomId}`)\r\n      .subscribe((data: Array<Item>) => {\r\n        this.items = data;\r\n        this.currentSong = this.items.filter(item => item.playlists.find(item => item.roomId === this.roomId && item.isCurrent))[0];\r\n        this.currentSongIndex = this.items.indexOf(this.currentSong);\r\n      });\r\n  }\r\n\r\n  onStateChange(event) {\r\n    this.ytEvent = event.data;\r\n    if (this.ytEvent === 0) {\r\n      this.playNextSong(this.items[this.currentSongIndex + 1] ? this.items[this.currentSongIndex + 1]._id : this.items[0]._id);\r\n    }\r\n  }\r\n\r\n  removeSongFromPlaylist(song: Item) {\r\n    if (song._id !== this.currentSong._id) {\r\n      let httpOptions = {\r\n        headers: new HttpHeaders({\r\n          'Content-Type': 'application/json'\r\n        }),\r\n        body: { roomId: this.roomId, song: song }\r\n      };\r\n      this.http.delete(`${environment.SERVER_URL}/song`, httpOptions)\r\n        .subscribe(data => this.presentToastWithOptions(data));\r\n    }\r\n  }\r\n\r\n  playNextSong(newSongId: string) {\r\n    if (newSongId !== this.currentSong._id) {\r\n      this.updateCurrentSong(newSongId);\r\n      this.player.loadVideoById(newSongId);\r\n    }\r\n  }\r\n\r\n  updateCurrentSong(newId: string) {\r\n    let songs = this.items.filter(item => item._id === newId || item._id === this.currentSong._id)\r\n      .map(item => {\r\n        let index = item.playlists.findIndex(item => item.roomId === this.roomId);\r\n        item.playlists[index].isCurrent = !item.playlists[index].isCurrent;\r\n        return item;\r\n      });\r\n    this.http.put(`${environment.SERVER_URL}/song`, { songs: songs, roomId: this.roomId })\r\n      .subscribe(data => this.presentToastWithOptions(data));\r\n  }\r\n\r\n  savePlayer(player) {\r\n    this.player = player;\r\n    this.playVideo();\r\n  }\r\n\r\n  playVideo() {\r\n    this.player.playVideo();\r\n  }\r\n\r\n  pauseVideo() {\r\n    this.player.pauseVideo();\r\n  }\r\n\r\n  async presentToastWithOptions(data) {\r\n    const toast = await this.toastController.create({\r\n      message: data[\"message\"],\r\n      position: 'bottom',\r\n      duration: 2000,\r\n      color: data[\"status\"],\r\n      buttons: [\r\n        {\r\n          side: 'start',\r\n          icon: 'musical-notes',\r\n        },\r\n        {\r\n          icon: 'close',\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n    toast.present();\r\n  }\r\n}"],"sourceRoot":""}