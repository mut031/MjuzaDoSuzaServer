{"version":3,"sources":["./src/app/tv/playlist-item/playlist-item.component.html","./src/app/tv/tv.page.html","./src/app/tv/playlist-item/playlist-item.component.scss","./src/app/tv/playlist-item/playlist-item.component.ts","./src/app/tv/tv.module.ts","./src/app/tv/tv.page.scss","./src/app/tv/tv.page.ts"],"names":[],"mappings":"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","file":"tv-tv-module-es2015.js","sourcesContent":["module.exports = \"<ion-item [attr.color]=\\\"result.isCurrent ? 'primary' : ''\\\" class=\\\"item\\\">\\n  <ion-thumbnail (click)=\\\"playMe()\\\" class=\\\"ion-margin-end thumbnail\\\">\\n    <img src=\\\"{{result.thumbnail}}\\\">\\n  </ion-thumbnail>\\n  <ion-label>\\n    <h2 (click)=\\\"playMe()\\\" class=\\\"title\\\">{{result?.title}}</h2>\\n    <p>{{result?.description}}</p>\\n  </ion-label>\\n  <ion-icon (click)=\\\"removeFromPlaylist()\\\" name=\\\"trash\\\" class=\\\"ion-margin-start trash\\\" color=\\\"danger\\\"></ion-icon>\\n</ion-item>\"","module.exports = \"<ion-content *ngIf=\\\"currentSong\\\">\\n  <ion-grid class=\\\"grid ion-padding\\\">\\n    <ion-row>\\n      <ion-col size=\\\"5\\\" class=\\\"col\\\">\\n        <youtube-player [videoId]=\\\"currentSong.id\\\" (ready)=\\\"savePlayer($event)\\\" (change)=\\\"onStateChange($event)\\\"></youtube-player>\\n      </ion-col>\\n      <ion-col size=\\\"7\\\">\\n        <ion-list>\\n          <app-playlist-item *ngFor=\\\"let item of items\\\" [result]=\\\"item\\\" (updatePlaylist)=\\\"updatePlaylist()\\\" (playSong)=\\\"playSongOnClick($event[0])\\\">\\n          </app-playlist-item>\\n        </ion-list>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\\n\"","module.exports = \".thumbnail {\\n  cursor: pointer;\\n}\\n\\n.title:hover {\\n  text-decoration: underline;\\n  cursor: pointer;\\n}\\n\\n.trash:hover {\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3ZlZHJhbi9EZXNrdG9wL21qdXphL01qdXphRG9TdXphL3NyYy9hcHAvdHYvcGxheWxpc3QtaXRlbS9wbGF5bGlzdC1pdGVtLmNvbXBvbmVudC5zY3NzIiwic3JjL2FwcC90di9wbGF5bGlzdC1pdGVtL3BsYXlsaXN0LWl0ZW0uY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxlQUFBO0FDQ0o7O0FEQ0E7RUFDSSwwQkFBQTtFQUNBLGVBQUE7QUNFSjs7QURDQTtFQUNJLGVBQUE7QUNFSiIsImZpbGUiOiJzcmMvYXBwL3R2L3BsYXlsaXN0LWl0ZW0vcGxheWxpc3QtaXRlbS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi50aHVtYm5haWwge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn1cbi50aXRsZTpob3ZlciB7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4udHJhc2g6aG92ZXIge1xuICAgIGN1cnNvcjogcG9pbnRlcjtcbn0iLCIudGh1bWJuYWlsIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4udGl0bGU6aG92ZXIge1xuICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG4udHJhc2g6aG92ZXIge1xuICBjdXJzb3I6IHBvaW50ZXI7XG59Il19 */\"","import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';\nimport { Item } from 'src/app/user/item.model';\nimport { HttpClient } from '@angular/common/http';\nimport { HttpHeaders } from '@angular/common/http';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-playlist-item',\n  templateUrl: './playlist-item.component.html',\n  styleUrls: ['./playlist-item.component.scss'],\n})\nexport class PlaylistItemComponent implements OnInit {\n  @Input() result: Item;\n  @Output() updatePlaylist: EventEmitter<any> = new EventEmitter();\n  @Output() playSong: EventEmitter<any> = new EventEmitter();\n\n  httpOptions;\n\n  constructor(private http: HttpClient) { }\n\n  ngOnInit() {\n    console.log(this.result.id);\n    this.httpOptions = {\n      headers: new HttpHeaders({\n        'Content-Type': 'application/json'\n      }),\n      body: this.result\n    };\n  }\n\n  removeFromPlaylist() {\n    console.log('deleting from playlist')\n    this.http.delete(`${environment.SERVER_URL}/playlist`, this.httpOptions)\n      .subscribe(data => {\n        if (data)\n          this.updatePlaylist.emit();\n      });\n  }\n\n  playMe() {\n    this.playSong.emit([this.result.id]);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TvPage } from './tv.page';\nimport { PlaylistItemComponent } from './playlist-item/playlist-item.component';\nimport { NgxYoutubePlayerModule } from 'ngx-youtube-player';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TvPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    NgxYoutubePlayerModule\n  ],\n  declarations: [TvPage, PlaylistItemComponent]\n})\nexport class TvPageModule {}\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3R2L3R2LnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { Item } from '../user/item.model';\nimport { HttpClient } from '@angular/common/http';\nimport { environment } from 'src/environments/environment';\n\n@Component({\n  selector: 'app-tv',\n  templateUrl: './tv.page.html',\n  styleUrls: ['./tv.page.scss'],\n})\nexport class TvPage implements OnInit {\n  items: Item[] = [];\n  currentSong: Item;\n\n  private player;\n  private ytEvent;\n  private currentSongIndex;\n\n  constructor(private http: HttpClient) { }\n\n  ngOnInit() {\n    this.getPlaylist();\n  }\n\n  getPlaylist() {\n    this.http.get(`${environment.SERVER_URL}/playlist`)\n      .subscribe((data: Array<Item>) => {\n        this.currentSong = data.filter((item, index) => {\n          if (item.isCurrent) {\n            this.currentSongIndex = index\n            return true;\n          }\n          return false;\n        })[0];\n        this.items = data;\n      });\n  }\n\n  updatePlaylist() {\n    this.getPlaylist();\n  }\n\n  onStateChange(event) {\n    this.ytEvent = event.data;\n    if (this.ytEvent === 0) {\n      this.playNextSong();\n    }\n  }\n\n  playNextSong() {\n    this.currentSong = this.items[++this.currentSongIndex];\n    this.items[this.currentSongIndex].isCurrent = true;\n    this.items[this.currentSongIndex - 1].isCurrent = false;\n    this.updateCurrentSong(this.items[this.currentSongIndex - 1].id);\n    this.player.loadVideoById(this.currentSong.id);\n  }\n\n  playSongOnClick(id: string) {\n    let oldId = this.items[this.currentSongIndex].id;\n    this.items[this.currentSongIndex].isCurrent = false;\n    this.currentSongIndex = this.items.findIndex(item => item.id === id);\n    this.items[this.currentSongIndex].isCurrent = true;\n    this.currentSong = this.items[this.currentSongIndex];\n    this.updateCurrentSong(oldId);\n    this.player.loadVideoById(id);\n  }\n\n  savePlayer(player) {\n    this.player = player;\n    this.playVideo();\n  }\n\n  updateCurrentSong(oldId: string) {\n    this.http.put(`${environment.SERVER_URL}/playlist`, { id: this.currentSong.id, isNew: true })\n      .subscribe(data => console.log('put response', data));\n    this.http.put(`${environment.SERVER_URL}/playlist`, { id: oldId, isNew: false })\n      .subscribe(data => console.log('put response', data));\n  }\n\n  playVideo() {\n    this.player.playVideo();\n  }\n\n  pauseVideo() {\n    this.player.pauseVideo();\n  }\n}"],"sourceRoot":""}