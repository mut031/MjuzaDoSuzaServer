(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{e2QP:function(n,l,t){"use strict";t.r(l);var e=t("CcnG"),u=t("mrSG"),o=t("t/Na"),i=t("AytR"),r=t("ZZ/e"),s=t("EnSQ"),a=function(){function n(n,l,t,e,u,o){this.ds=n,this.http=l,this.socket=t,this.route=e,this.router=u,this.toastController=o,this.items=[],this.showPlayer=!0}return n.prototype.ngOnInit=function(){var n=this;this.roomId=this.route.snapshot.paramMap.get("id"),this.roomId||this.router.navigate(["/home"]),this.getRoomAdmin(),this.socket.connect(),this.socket.emit("createRoom",{roomId:this.roomId}),this.socket.fromEvent("update").subscribe((function(){n.getPlaylistForRoom()})),this.getPlaylistForRoom()},n.prototype.getRoomAdmin=function(){var n=this;this.http.get(i.a.SERVER_URL+"/playlists/"+this.roomId).subscribe((function(l){l&&l.user.length>0&&l.user!==localStorage.getItem("username")&&n.router.navigate(["/home"])}))},n.prototype.getPlaylistForRoom=function(){var n=this;this.http.get(i.a.SERVER_URL+"/songs/"+this.roomId).subscribe((function(l){n.items=l,n.currentSong=n.items.filter((function(l){return l.playlists.find((function(l){return l.roomId===n.roomId&&l.isCurrent}))}))[0],n.currentSongIndex=n.items.indexOf(n.currentSong)}))},n.prototype.onStateChange=function(n){this.ytEvent=n.data,0===this.ytEvent&&this.playNextSong(this.items[this.currentSongIndex+1]?this.items[this.currentSongIndex+1]._id:this.items[0]._id)},n.prototype.removeSongFromPlaylist=function(n){var l=this;if(n._id!==this.currentSong._id){var t={headers:new o.g({"Content-Type":"application/json"}),body:{roomId:this.roomId,song:n}};this.http.delete(i.a.SERVER_URL+"/song",t).subscribe((function(n){return l.presentToastWithOptions(n)}))}},n.prototype.playNextSong=function(n){n!==this.currentSong._id&&(this.updateCurrentSong(n),this.player.loadVideoById(n))},n.prototype.updateCurrentSong=function(n){var l=this,t=this.items.filter((function(t){return t._id===n||t._id===l.currentSong._id})).map((function(n){var t=n.playlists.findIndex((function(n){return n.roomId===l.roomId}));return n.playlists[t].isCurrent=!n.playlists[t].isCurrent,n}));this.http.put(i.a.SERVER_URL+"/song",{songs:t,roomId:this.roomId}).subscribe((function(n){return l.presentToastWithOptions(n)}))},n.prototype.savePlayer=function(n){this.player=n,this.playVideo()},n.prototype.playVideo=function(){this.player.playVideo()},n.prototype.pauseVideo=function(){this.player.pauseVideo()},n.prototype.presentToastWithOptions=function(n){return u.b(this,void 0,void 0,(function(){return u.e(this,(function(l){switch(l.label){case 0:return[4,this.toastController.create({message:n.message,position:"bottom",duration:2e3,color:n.status,buttons:[{side:"start",icon:"musical-notes"},{icon:"close",role:"cancel"}]})];case 1:return l.sent().present(),[2]}}))}))},n}(),c=function(){return function(){}}(),b=t("pMnS"),h=t("oBZk"),d=function(){function n(){this.playSong=new e.m,this.deleteSong=new e.m}return n.prototype.ngOnInit=function(){},n.prototype.deleteMe=function(){this.currentId!==this.result._id&&this.deleteSong.emit([this.result])},n.prototype.playMe=function(){this.currentId!==this.result._id&&this.playSong.emit([this.result._id])},n}(),p=e.rb({encapsulation:0,styles:[[".thumbnail[_ngcontent-%COMP%]{cursor:pointer}.title[_ngcontent-%COMP%]:hover{text-decoration:underline;cursor:pointer}.trash[_ngcontent-%COMP%]:hover{cursor:pointer}"]],data:{}});function g(n){return e.Nb(0,[(n()(),e.tb(0,0,null,null,12,"ion-item",[["class","item"]],[[1,"color",0]],null,null,h.I,h.m)),e.sb(1,49152,null,0,r.F,[e.h,e.k,e.z],{disabled:[0,"disabled"]},null),(n()(),e.tb(2,0,null,0,2,"ion-thumbnail",[["class","ion-margin-end thumbnail"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.playMe()&&e),e}),h.P,h.t)),e.sb(3,49152,null,0,r.xb,[e.h,e.k,e.z],null,null),(n()(),e.tb(4,0,null,0,0,"img",[],[[8,"src",4]],null,null,null,null)),(n()(),e.tb(5,0,null,0,5,"ion-label",[],null,null,null,h.J,h.n)),e.sb(6,49152,null,0,r.L,[e.h,e.k,e.z],null,null),(n()(),e.tb(7,0,null,0,1,"h2",[["class","title"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.playMe()&&e),e}),null,null)),(n()(),e.Lb(8,null,["",""])),(n()(),e.tb(9,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),e.Lb(10,null,["",""])),(n()(),e.tb(11,0,null,0,1,"ion-icon",[["class","ion-margin-start trash"],["color","danger"],["name","trash"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.deleteMe()&&e),e}),h.G,h.k)),e.sb(12,49152,null,0,r.A,[e.h,e.k,e.z],{color:[0,"color"],name:[1,"name"]},null)],(function(n,l){var t=l.component;n(l,1,0,t.result._id===t.currentId),n(l,12,0,"danger","trash")}),(function(n,l){var t=l.component;n(l,0,0,t.result._id===t.currentId?"primary":""),n(l,4,0,e.xb(1,"",t.result.thumbnail,"")),n(l,8,0,null==t.result?null:t.result.title),n(l,10,0,null==t.result?null:t.result.description)}))}var m=t("KoGn"),f=e.rb({encapsulation:2,styles:[],data:{}});function y(n){return e.Nb(2,[(n()(),e.tb(0,0,null,null,0,"div",[["id","yt-player-ngx-component"]],null,null,null,null,null))],null,null)}var v=t("Ip0R"),I=t("gIcY"),S=t("92vz"),k=t("ZYCi"),C=e.rb({encapsulation:0,styles:[[""]],data:{}});function _(n){return e.Nb(0,[(n()(),e.tb(0,0,null,null,1,"app-playlist-item",[],null,[[null,"playSong"],[null,"deleteSong"]],(function(n,l,t){var e=!0,u=n.component;return"playSong"===l&&(e=!1!==u.playNextSong(t[0])&&e),"deleteSong"===l&&(e=!1!==u.removeSongFromPlaylist(t[0])&&e),e}),g,p)),e.sb(1,114688,null,0,d,[],{result:[0,"result"],currentId:[1,"currentId"]},{playSong:"playSong",deleteSong:"deleteSong"})],(function(n,l){n(l,1,0,l.context.$implicit,l.component.currentSong._id)}),null)}function z(n){return e.Nb(0,[(n()(),e.tb(0,0,null,null,7,"ion-card-content",[["class","ion-text-center"]],null,null,null,h.z,h.e)),e.sb(1,49152,null,0,r.l,[e.h,e.k,e.z],null,null),(n()(),e.tb(2,0,null,0,1,"youtube-player",[["width","70%"]],[[8,"hidden",0]],[[null,"ready"],[null,"change"]],(function(n,l,t){var e=!0,u=n.component;return"ready"===l&&(e=!1!==u.savePlayer(t)&&e),"change"===l&&(e=!1!==u.onStateChange(t)&&e),e}),y,f)),e.sb(3,1097728,null,0,m.b,[m.c,e.k,e.D],{videoId:[0,"videoId"],width:[1,"width"]},{ready:"ready",change:"change"}),(n()(),e.tb(4,0,null,0,3,"ion-list",[],null,null,null,h.K,h.o)),e.sb(5,49152,null,0,r.M,[e.h,e.k,e.z],null,null),(n()(),e.ib(16777216,null,0,1,null,_)),e.sb(7,278528,null,0,v.h,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var t=l.component;n(l,3,0,t.currentSong._id,"70%"),n(l,7,0,t.items)}),(function(n,l){n(l,2,0,!l.component.showPlayer)}))}function R(n){return e.Nb(0,[e.Gb(0,v.n,[]),(n()(),e.tb(1,0,null,null,28,"ion-content",[],null,null,null,h.D,h.h)),e.sb(2,49152,null,0,r.s,[e.h,e.k,e.z],null,null),(n()(),e.tb(3,0,null,0,26,"ion-grid",[],null,null,null,h.E,h.i)),e.sb(4,49152,null,0,r.y,[e.h,e.k,e.z],null,null),(n()(),e.tb(5,0,null,0,24,"ion-row",[],null,null,null,h.L,h.p)),e.sb(6,49152,null,0,r.hb,[e.h,e.k,e.z],null,null),(n()(),e.tb(7,0,null,0,22,"ion-col",[["class","align-items-center justify-content-center"],["offset","2"],["size","8"]],null,null,null,h.C,h.g)),e.sb(8,49152,null,0,r.r,[e.h,e.k,e.z],{offset:[0,"offset"],size:[1,"size"]},null),(n()(),e.tb(9,0,null,0,20,"ion-card",[],null,null,null,h.B,h.d)),e.sb(10,49152,null,0,r.k,[e.h,e.k,e.z],null,null),(n()(),e.tb(11,0,null,0,16,"ion-card-header",[],null,null,null,h.A,h.f)),e.sb(12,49152,null,0,r.m,[e.h,e.k,e.z],null,null),(n()(),e.tb(13,0,null,0,2,"h1",[],null,null,null,null,null)),(n()(),e.Lb(14,null,["Room code: ",""])),e.Hb(15,1),(n()(),e.tb(16,0,null,0,11,"ion-item",[["lines","none"]],null,null,null,h.I,h.m)),e.sb(17,49152,null,0,r.F,[e.h,e.k,e.z],{lines:[0,"lines"]},null),(n()(),e.tb(18,0,null,0,2,"ion-label",[],null,null,null,h.J,h.n)),e.sb(19,49152,null,0,r.L,[e.h,e.k,e.z],null,null),(n()(),e.Lb(-1,0,["Show video player"])),(n()(),e.tb(21,0,null,0,6,"ion-toggle",[["checked",""],["name","blueberry"],["slot","start"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,t){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==e.Fb(n,22)._handleBlurEvent(t.target)&&u),"ionChange"===l&&(u=!1!==e.Fb(n,22)._handleIonChange(t.target)&&u),"ngModelChange"===l&&(u=!1!==(o.showPlayer=t)&&u),u}),h.Q,h.u)),e.sb(22,16384,null,0,r.b,[e.k],null,null),e.Ib(1024,null,I.b,(function(n){return[n]}),[r.b]),e.sb(24,671744,null,0,I.e,[[8,null],[8,null],[8,null],[6,I.b]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),e.Ib(2048,null,I.c,null,[I.e]),e.sb(26,16384,null,0,I.d,[[4,I.c]],null,null),e.sb(27,49152,null,0,r.zb,[e.h,e.k,e.z],{checked:[0,"checked"],name:[1,"name"]},null),(n()(),e.ib(16777216,null,0,1,null,z)),e.sb(29,16384,null,0,v.i,[e.O,e.L],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,8,0,"2","8"),n(l,17,0,"none"),n(l,24,0,"blueberry",t.showPlayer),n(l,27,0,"","blueberry"),n(l,29,0,t.currentSong)}),(function(n,l){var t=l.component,u=e.Mb(l,14,0,n(l,15,0,e.Fb(l,0),t.roomId));n(l,14,0,u),n(l,21,0,e.Fb(l,26).ngClassUntouched,e.Fb(l,26).ngClassTouched,e.Fb(l,26).ngClassPristine,e.Fb(l,26).ngClassDirty,e.Fb(l,26).ngClassValid,e.Fb(l,26).ngClassInvalid,e.Fb(l,26).ngClassPending)}))}function F(n){return e.Nb(0,[(n()(),e.tb(0,0,null,null,1,"app-tv",[],null,null,null,R,C)),e.sb(1,114688,null,0,a,[s.a,o.c,S.a,k.a,k.m,r.Jb],null,null)],(function(n,l){n(l,1,0)}),null)}var w=e.pb("app-tv",a,F,{},{},[]);t.d(l,"TvPageModuleNgFactory",(function(){return P}));var P=e.qb(c,[],(function(n){return e.Cb([e.Db(512,e.j,e.bb,[[8,[b.a,w]],[3,e.j],e.x]),e.Db(4608,v.k,v.j,[e.u,[2,v.s]]),e.Db(4608,I.g,I.g,[]),e.Db(4608,r.a,r.a,[e.z,e.g]),e.Db(4608,r.Eb,r.Eb,[r.a,e.j,e.q]),e.Db(4608,r.Hb,r.Hb,[r.a,e.j,e.q]),e.Db(4608,m.c,m.c,[e.z]),e.Db(1073742336,v.b,v.b,[]),e.Db(1073742336,I.f,I.f,[]),e.Db(1073742336,I.a,I.a,[]),e.Db(1073742336,r.Cb,r.Cb,[]),e.Db(1073742336,k.n,k.n,[[2,k.s],[2,k.m]]),e.Db(1073742336,m.a,m.a,[]),e.Db(1073742336,c,c,[]),e.Db(1024,k.k,(function(){return[[{path:"",component:a}]]}),[])])}))}}]);