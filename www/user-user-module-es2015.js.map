{"version":3,"sources":["./src/app/user/search-result/search-result.component.html","./src/app/user/user.page.html","./src/app/user/search-result/search-result.component.scss","./src/app/user/search-result/search-result.component.ts","./src/app/user/user.module.ts","./src/app/user/user.page.scss","./src/app/user/user.page.ts"],"names":[],"mappings":"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","file":"user-user-module-es2015.js","sourcesContent":["module.exports = \"<ion-item (click)=\\\"addToPlaylist()\\\" class=\\\"item\\\">\\r\\n  <ion-thumbnail class=\\\"ion-margin-end\\\">\\r\\n    <img src=\\\"{{result.thumbnail}}\\\">\\r\\n  </ion-thumbnail>\\r\\n  <ion-label class=\\\"ion-text-wrap\\\">\\r\\n    <h3>{{result?.title}}</h3>\\r\\n    <p>{{result?.description}}</p>\\r\\n    <p>{{result?.duration}}</p>\\r\\n  </ion-label>\\r\\n  <ion-spinner *ngIf=\\\"isAdding\\\" color=\\\"primary\\\" class=\\\"ion-margin\\\"></ion-spinner>\\r\\n</ion-item>\"","module.exports = \"<ion-content class=\\\"ion-padding\\\" *ngIf=\\\"!isSearching\\\">\\r\\n  <ion-searchbar id=\\\"search\\\" [(ngModel)]=\\\"query\\\" (change)=\\\"onSearch($event)\\\"></ion-searchbar>\\r\\n  <ion-list>\\r\\n    <app-search-result *ngFor=\\\"let item of items\\\" [result]=\\\"item\\\"></app-search-result>\\r\\n  </ion-list>\\r\\n\\r\\n  <ion-content *ngIf=\\\"!items.length && !firstSearch\\\" class=\\\"ion-text-center\\\">\\r\\n    <ion-icon name=\\\"outlet\\\" class=\\\"outlet\\\" color=\\\"danger\\\"></ion-icon>\\r\\n    <ion-text color=\\\"medium\\\">\\r\\n      <h1>Oh snap!</h1>\\r\\n      <p>No results found for \\\"{{query}}\\\"</p>\\r\\n    </ion-text>\\r\\n  </ion-content>\\r\\n\\r\\n  <ion-content *ngIf=\\\"firstSearch\\\" class=\\\"ion-text-center\\\">\\r\\n    <ion-icon name=\\\"musical-notes\\\" class=\\\"notes\\\" color=\\\"primary\\\"></ion-icon>\\r\\n    <ion-text color=\\\"medium\\\">\\r\\n      <h1>Mjuza Do Suza</h1>\\r\\n      <p>Search and add songs to playlist</p>\\r\\n    </ion-text>\\r\\n  </ion-content>\\r\\n\\r\\n</ion-content>\\r\\n<ion-spinner id=\\\"spinner\\\" color=\\\"primary\\\" *ngIf=\\\"isSearching\\\"></ion-spinner>\"","module.exports = \".item {\\n  cursor: pointer;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdXNlci9zZWFyY2gtcmVzdWx0L0M6XFxJb25pY1xcTWp1emFEb1N1emEvc3JjXFxhcHBcXHVzZXJcXHNlYXJjaC1yZXN1bHRcXHNlYXJjaC1yZXN1bHQuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3VzZXIvc2VhcmNoLXJlc3VsdC9zZWFyY2gtcmVzdWx0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksZUFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvdXNlci9zZWFyY2gtcmVzdWx0L3NlYXJjaC1yZXN1bHQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaXRlbSB7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAvLyAtLWlubmVyLWJvcmRlci13aWR0aDogMDtcclxufSIsIi5pdGVtIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xufSJdfQ== */\"","import { Component, OnInit, Input } from '@angular/core';\r\nimport { Item } from '../item.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\nimport { ToastController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-search-result',\r\n  templateUrl: './search-result.component.html',\r\n  styleUrls: ['./search-result.component.scss'],\r\n})\r\nexport class SearchResultComponent implements OnInit {\r\n  @Input() result: Item;\r\n  isAdding: boolean = false;\r\n\r\n  constructor(private http: HttpClient, public toastController: ToastController) { }\r\n\r\n  ngOnInit() {}\r\n\r\n  async presentToastWithOptions(data) {\r\n    const toast = await this.toastController.create({\r\n      message: data[\"message\"],\r\n      position: 'bottom',\r\n      duration: 2000,\r\n      color: data[\"status\"],\r\n      buttons: [\r\n        {\r\n          side: 'start',\r\n          icon: 'musical-notes',\r\n        },\r\n        {\r\n          icon: 'close',\r\n          role: 'cancel'\r\n        }\r\n      ]\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  addToPlaylist() {\r\n    this.isAdding = true;\r\n    this.http.post(`${environment.SERVER_URL}/song`, { item: this.result })\r\n      .subscribe((data) => {\r\n        setTimeout(() => {\r\n          this.presentToastWithOptions(data);\r\n          this.isAdding = false;\r\n        }, 1100);\r\n      });\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { UserPage } from './user.page';\nimport { SearchResultComponent } from './search-result/search-result.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: UserPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [UserPage, SearchResultComponent]\n})\nexport class UserPageModule {}\n","module.exports = \"#spinner {\\n  display: block;\\n  margin: auto;\\n}\\n\\n.outlet, .notes {\\n  zoom: 5;\\n  margin: 10px auto 0;\\n  display: block;\\n}\\n\\n#search {\\n  --icon-color: #3880ff;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdXNlci9DOlxcSW9uaWNcXE1qdXphRG9TdXphL3NyY1xcYXBwXFx1c2VyXFx1c2VyLnBhZ2Uuc2NzcyIsInNyYy9hcHAvdXNlci91c2VyLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGNBQUE7RUFDQSxZQUFBO0FDQ0o7O0FERUE7RUFDSSxPQUFBO0VBQ0EsbUJBQUE7RUFDQSxjQUFBO0FDQ0o7O0FERUE7RUFDSSxxQkFBQTtBQ0NKIiwiZmlsZSI6InNyYy9hcHAvdXNlci91c2VyLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNzcGlubmVyIHtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgbWFyZ2luOiBhdXRvO1xyXG59XHJcblxyXG4ub3V0bGV0LCAubm90ZXMge1xyXG4gICAgem9vbTogNTtcclxuICAgIG1hcmdpbjogMTBweCBhdXRvIDA7XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxufVxyXG5cclxuI3NlYXJjaCB7XHJcbiAgICAtLWljb24tY29sb3I6ICMzODgwZmY7XHJcbn0iLCIjc3Bpbm5lciB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW46IGF1dG87XG59XG5cbi5vdXRsZXQsIC5ub3RlcyB7XG4gIHpvb206IDU7XG4gIG1hcmdpbjogMTBweCBhdXRvIDA7XG4gIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4jc2VhcmNoIHtcbiAgLS1pY29uLWNvbG9yOiAjMzg4MGZmO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { Item } from './item.model';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { environment } from '../../environments/environment';\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\n\r\n@Component({\r\n  selector: 'app-user',\r\n  templateUrl: './user.page.html',\r\n  styleUrls: ['./user.page.scss'],\r\n})\r\nexport class UserPage implements OnInit {\r\n  query: string;\r\n  items: Item[] = [];\r\n  data: any;\r\n  isSearching: boolean = false;\r\n  firstSearch: boolean = true;\r\n  roomId: string;\r\n\r\n  constructor(private http: HttpClient, private route: ActivatedRoute, private router: Router) { }\r\n\r\n  ngOnInit() {\r\n    this.roomId = this.route.snapshot.paramMap.get('id');\r\n    if (!this.roomId) {\r\n      this.router.navigate(['/home'])\r\n    }\r\n    this.http.get(`${environment.SERVER_URL}/playlists`)\r\n      .subscribe((data: any) => {\r\n        if (!data.filter(item => item.title === this.roomId).length)\r\n          this.router.navigate(['/home'])\r\n      });\r\n  }\r\n\r\n  apiUrl(query: string): string {\r\n    let q = query.replace(' ', '%20');\r\n    return `/search?q=${q}`;\r\n    // return `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=25&q=${q}&key=${environment.YOUTUBE_API_KEY}`;\r\n  }\r\n\r\n  // getPlaylistForRoom() {\r\n  //   this.http.get(`${environment.SERVER_URL}/songs/${this.roomId}`)\r\n  //     .subscribe((data: Array<Item>) => {\r\n  //       this.items = data;\r\n  //       this.currentSong = this.items[0];\r\n  //       this.currentSongIndex = 0;\r\n  //     });\r\n  // }\r\n\r\n  onSearch(e) {\r\n    this.firstSearch = false;\r\n    this.query = e.target.value;\r\n    this.isSearching = true;\r\n    this.http.get(this.apiUrl(e.target.value))\r\n      .subscribe(data => {\r\n        this.filterResults(data);\r\n        this.isSearching = false;\r\n      });\r\n  }\r\n\r\n  filterResults(data: any) {\r\n    this.items = data.results\r\n      .filter(item => item.video.duration !== 'Playlist')\r\n      .map(item => {\r\n        return {\r\n          _id: item.video.id,\r\n          title: item.video.title,\r\n          description: item.uploader.username,\r\n          thumbnail: item.video.thumbnail_src,\r\n          duration: item.video.duration,\r\n          playlists: [{ roomId: this.roomId }]\r\n        }\r\n      });\r\n  }\r\n}\r\n"],"sourceRoot":""}